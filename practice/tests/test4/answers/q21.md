# Question 21

## Topic
Design Cost-Optimized Architectures

## Question
A company conducts performance testing on a large instance MySQL RDS DB instance twice a week. They use Performance Insights to analyze and fine-tune expensive queries. The company needs to reduce its operational expenses in running the tests without compromising the tests' integrity.

Which of the following is the most cost-effective solution?

## Options
A. Perform a mysqldump to get a copy of the database on a local machine. Use MySQL Workbench to analyze the queries.

B. Downgrade the database to a smaller instance.

C. Stop the database once the test is done and restart it only when necessary.

D. Once the testing is completed, take a snapshot of the database and terminate it. Restore the database from the snapshot when necessary.

## Correct Answer
D

## Explanation
Amazon RDS creates a storage volume snapshot that backs up the entire DB instance, not just individual databases. It's important to keep in mind that when creating a DB snapshot on a Single-AZ DB instance, a brief I/O suspension may occur. The duration of the suspension can vary from a few seconds to a few minutes, depending on the size and class of your DB instance.

In the scenario, taking a snapshot allows you to capture the current state of the database, including all data and configurations. By terminating the database, you can avoid incurring costs during the idle period between tests. You can simply restore the database from the snapshot when you need to run the tests again. This approach helps minimize costs by only paying for the database instance during the actual testing periods.

Hence, the correct answer is: Once the testing is completed, take a snapshot of the database and terminate it. Restore the database from the snapshot when necessary.

Reference:

https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_RestoreFromSnapshot.html

https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_CreateSnapshot.html

**Why other options are incorrect:**

- The option that says: Stop the database once the test is done and restart it only when necessary is incorrect. While stopping the database instance can save costs on compute resources, it's important to note that a stopped DB instance does continue to incur costs on its provisioned storage.

- The option that says: Downgrade the database to a smaller instance. is incorrect. The downsized instance may not have sufficient resources to accurately simulate real-world scenarios or handle the workload generated by the tests. Therefore, while it may save costs, it may compromise the integrity of the tests.

- The option that says: Perform a mysqldump to get a copy of the database on a local machine. Use MySQL Workbench to analyze the queries is incorrect. Although this approach would totally save costs, testing on a local machine may not accurately replicate the resources and environment of a large RDS DB instance. Thus, the tests might produce unreliable results.

